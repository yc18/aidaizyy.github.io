<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Swift基础入门(7)：属性，方法和下标 | Yunyao Zhang - 张云尧</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="本篇介绍Swift的基础知识：枚举，结构体和类的属性，方法和下标。">
<meta name="keywords" content="swift">
<meta property="og:type" content="article">
<meta property="og:title" content="Swift基础入门(7)：属性，方法和下标">
<meta property="og:url" content="http://aidaiz.com/swift_7/index.html">
<meta property="og:site_name" content="Yunyao Zhang - 张云尧">
<meta property="og:description" content="本篇介绍Swift的基础知识：枚举，结构体和类的属性，方法和下标。">
<meta property="og:image" content="http://7xivk7.com1.z0.glb.clouddn.com/paycode01.jpg">
<meta property="og:image" content="http://7xivk7.com1.z0.glb.clouddn.com/paycode02.jpg">
<meta property="og:updated_time" content="2017-05-08T16:40:35.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Swift基础入门(7)：属性，方法和下标">
<meta name="twitter:description" content="本篇介绍Swift的基础知识：枚举，结构体和类的属性，方法和下标。">
<meta name="twitter:image" content="http://7xivk7.com1.z0.glb.clouddn.com/paycode01.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Yunyao Zhang - 张云尧" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yunyao Zhang - 张云尧</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">会有一天肆无忌惮地桀骜不驯</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://aidaiz.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-swift_7" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/swift_7/" class="article-date">
  <time datetime="2015-07-20T02:10:20.000Z" itemprop="datePublished">Jul 20 2015</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/swift/">swift</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Swift基础入门(7)：属性，方法和下标
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本篇介绍Swift的基础知识：枚举，结构体和类的属性，方法和下标。</p>
<a id="more"></a>
<p><strong>Title: <a href="https://aidaizyy.github.io/swift_7" target="_blank" rel="external">Swift基础入门(7)：属性，方法和下标</a></strong><br><strong>Author: <a href="http://aidaizyy.github.io" target="_blank" rel="external">Yunyao Zhang(张云尧)</a></strong><br><strong>E-mail: <a href="&#x6d;&#97;&#105;&#x6c;&#116;&#111;&#x3a;&#x61;&#x69;&#x64;&#97;&#x69;&#x7a;&#121;&#121;&#64;&#x67;&#109;&#97;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#x61;&#x69;&#x64;&#97;&#x69;&#x7a;&#121;&#121;&#64;&#x67;&#109;&#97;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a></strong><br><strong>Last Modified: <a href="http://aidaizyy.github.io" target="_blank" rel="external">2015-07-27</a></strong></p>
<h1 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h1><p>属性分为存储属性（只能用于类和结构体）和计算属性（可用于类，结构体和枚举）。</p>
<h2 id="存储属性"><a href="#存储属性" class="headerlink" title="存储属性"></a>存储属性</h2><p>存储属性可用<code>var</code>或<code>let</code>修饰。<br>结构体用<code>let</code>修饰，属性不可以更改，因为结构体是值类型。<br>类用<code>let</code>修饰，属性可以更改，因为类是引用类型。<br>结构体可以在构造时逐一初始化属性，而类不可以，参见<a href="http://aidaizyy.github.io/swift_6/#类和结构体" target="_blank" rel="external">类和结构体</a>。</p>
<ul>
<li>延迟属性<br>延迟属性用<code>lazy</code>标示，且必须使用<code>var</code>关键字，只有在第一次被调用时才会计算其初始值，在构造时不会计算初始值。<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataImporter</span> </span>&#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line">    DataImporter 是一个将外部文件中的数据导入的类。</div><div class="line">    这个类的初始化会消耗不少时间。</div><div class="line">    */</div><div class="line">    <span class="keyword">var</span> fileName = <span class="string">"data.txt"</span></div><div class="line">    <span class="comment">// 这是提供数据导入功能</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataManager</span> </span>&#123;</div><div class="line">    <span class="built_in">lazy</span> <span class="keyword">var</span> importer = <span class="type">DataImporter</span>()</div><div class="line">    <span class="keyword">var</span> data = [<span class="type">String</span>]()</div><div class="line">    <span class="comment">// 这是提供数据管理功能</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> manager = <span class="type">DataManager</span>()</div><div class="line">manager.data.append(<span class="string">"Some data"</span>)</div><div class="line">manager.data.append(<span class="string">"Some more data"</span>)</div><div class="line"><span class="comment">// DataImporter 实例的 importer 属性还没有被创建</span></div><div class="line"></div><div class="line"><span class="built_in">println</span>(manager.importer.fileName)</div><div class="line"><span class="comment">// DataImporter 实例的 importer 属性现在被创建了</span></div><div class="line"><span class="comment">// 输出 "data.txt”</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>以上并未给出全部代码，类<code>DataManager</code>中声明了延迟属性<code>importer</code>。<br>类<code>DataImporter</code>实现数据导入功能，会消耗不少时间。<br>初始化类<code>DataManager</code>时，延迟属性并不会创建。<br>只有在<code>println(manager.importer.fileName)</code>时，属性<code>importer</code>第一次被调用时，才会创建延迟属性<code>importer</code>，完成数据导入功能。</p>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>计算属性不直接存储值，提供getter获取值和可选的setter来间接设置其他属性的值，必须用<code>var</code>修饰。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Size</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span></div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rect</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> origin = <span class="type">Point</span>()</div><div class="line">    <span class="keyword">var</span> size = <span class="type">Size</span>()</div><div class="line">    <span class="keyword">var</span> center: <span class="type">Point</span> &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">        <span class="keyword">let</span> centerX = origin.x + (size.width / <span class="number">2</span>)</div><div class="line">        <span class="keyword">let</span> centerY = origin.y + (size.height / <span class="number">2</span>)</div><div class="line">        <span class="keyword">return</span> <span class="type">Point</span>(x: centerX, y: centerY)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">set</span>(newCenter) &#123;</div><div class="line">        origin.x = newCenter.x - (size.width / <span class="number">2</span>)</div><div class="line">        origin.y = newCenter.y - (size.height / <span class="number">2</span>)</div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> square = <span class="type">Rect</span>(origin: <span class="type">Point</span>(x: <span class="number">0.0</span>, y: <span class="number">0.0</span>),</div><div class="line">    size: <span class="type">Size</span>(width: <span class="number">10.0</span>, height: <span class="number">10.0</span>))</div><div class="line"><span class="keyword">let</span> initialSquareCenter = square.center</div><div class="line">square.center = <span class="type">Point</span>(x: <span class="number">15.0</span>, y: <span class="number">15.0</span>)</div><div class="line"><span class="built_in">println</span>(<span class="string">"square.origin is now at (\(square.origin.x), \(square.origin.y))"</span>)</div><div class="line"><span class="comment">// 输出 "square.origin is now at (10.0, 10.0)”</span></div></pre></td></tr></table></figure></p>
<p>在结构体<code>Rect</code>中，属性<code>center</code>是计算属性，分别设置了<code>get</code>方法和<code>set</code>方法。<br><code>set</code>方法可以不指定新值的参数名称，比如<code>newCenter</code>，在方法中直接使用默认名称<code>newValue</code>，上面可写作：<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">set</span> &#123;</div><div class="line">        origin.x = newValue.x - (size.width / <span class="number">2</span>)</div><div class="line">        origin.y = newValue.y - (size.height / <span class="number">2</span>)</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>只读计算属性<br>不设置setter，只设置getter的计算属性称为只读计算属性。<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Cuboid</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> width = <span class="number">0.0</span>, height = <span class="number">0.0</span>, depth = <span class="number">0.0</span></div><div class="line">    <span class="keyword">var</span> volume: <span class="type">Double</span> &#123;</div><div class="line">    <span class="keyword">return</span> width * height * depth</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> fourByFiveByTwo = <span class="type">Cuboid</span>(width: <span class="number">4.0</span>, height: <span class="number">5.0</span>, depth: <span class="number">2.0</span>)</div><div class="line"><span class="built_in">println</span>(<span class="string">"the volume of fourByFiveByTwo is \(fourByFiveByTwo.volume)"</span>)</div><div class="line"><span class="comment">// 输出 "the volume of fourByFiveByTwo is 40.0"</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>只读计算属性可省略<code>get</code>关键字。</p>
<h2 id="属性观察器"><a href="#属性观察器" class="headerlink" title="属性观察器"></a>属性观察器</h2><p>属性观察器可以监控和响应属性值的变化。</p>
<ul>
<li>willSet 在设置新值之前调用</li>
<li>didSet 在设置新值之后调用<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">StepCounter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> totalSteps: <span class="type">Int</span> = <span class="number">0</span> &#123;</div><div class="line">    <span class="keyword">willSet</span>(newTotalSteps) &#123;</div><div class="line">        <span class="built_in">println</span>(<span class="string">"About to set totalSteps to \(newTotalSteps)"</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">didSet</span>(oldTotalSteps) &#123;</div><div class="line">        <span class="keyword">if</span> totalSteps &gt; oldTotalSteps  &#123;</div><div class="line">            <span class="built_in">println</span>(<span class="string">"Added \(totalSteps - oldTotalSteps) steps"</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> stepCounter = <span class="type">StepCounter</span>()</div><div class="line">stepCounter.totalSteps = <span class="number">200</span></div><div class="line"><span class="comment">// About to set totalSteps to 200</span></div><div class="line"><span class="comment">// Added 200 steps</span></div><div class="line">stepCounter.totalSteps = <span class="number">360</span></div><div class="line"><span class="comment">// About to set totalSteps to 360</span></div><div class="line"><span class="comment">// Added 160 steps</span></div><div class="line">stepCounter.totalSteps = <span class="number">896</span></div><div class="line"><span class="comment">// About to set totalSteps to 896</span></div><div class="line"><span class="comment">// Added 536 steps</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>willSet</code>如果不指定新值参数名，可用<code>newValue</code>替代。<br><code>didSet</code>如果不指定旧值参数名，可用<code>oldValue</code>替代。<br>通过重写的方式可以为继承来的存储属性和计算属性添加属性观察器。</p>
<p>计算属性和属性观察器也可以用于全局变量和局部变量。<br>全局的常量变量都是延迟计算的，不需要标记<code>lazy</code>。而局部的常量变量不会延迟计算。</p>
<h2 id="类型属性"><a href="#类型属性" class="headerlink" title="类型属性"></a>类型属性</h2><p>类型属性指所有类型实例公用的属性，类似于其他语言中的静态属性（<em>static</em>）。<br>值类型（枚举和结构体）可以定义存储型和计算型的类型属性。<br>引用类型（类）只能定义计算型的类型属性。<br>存储型的类型属性必须指定默认值。</p>
<p>值类型（枚举和结构体）中在类型属性前加上关键字<code>static</code>，而引用类型（类）中在类型属性前加上关键字<code>class</code>。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">SomeStructure</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value."</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">    <span class="comment">// 这里返回一个 Int 值</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">SomeEnumeration</span> </span>&#123;</div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> storedTypeProperty = <span class="string">"Some value."</span></div><div class="line">    <span class="keyword">static</span> <span class="keyword">var</span> computedTypeProperty: <span class="type">Int</span> &#123;</div><div class="line">    <span class="comment">// 这里返回一个 Int 值</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">    <span class="class"><span class="keyword">class</span> <span class="title">var</span> <span class="title">computedTypeProperty</span>: <span class="title">Int</span> </span>&#123;</div><div class="line">    <span class="comment">// 这里返回一个 Int 值</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">println</span>(<span class="type">SomeClass</span>.computedTypeProperty)</div><div class="line"><span class="comment">// 输出 "42"</span></div><div class="line"></div><div class="line"><span class="built_in">println</span>(<span class="type">SomeStructure</span>.storedTypeProperty)</div><div class="line"><span class="comment">// 输出 "Some value."</span></div><div class="line"><span class="type">SomeStructure</span>.storedTypeProperty = <span class="string">"Another value."</span></div><div class="line"><span class="built_in">println</span>(<span class="type">SomeStructure</span>.storedTypeProperty)</div><div class="line"><span class="comment">// 输出 "Another value.”</span></div></pre></td></tr></table></figure></p>
<p>这里计算型类型属性都是只读型，也可以定义为可读可写。</p>
<h1 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h1><h2 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h2><p>方法是定义在类，结构体和枚举中的方法，和函数类似。<br>类，结构体和枚举创建实例后，其中的方法被称为实例方法，只属于当前实例。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="built_in">count</span>++</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(amount: Int)</span></span> &#123;</div><div class="line">    <span class="built_in">count</span> += amount</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">reset</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="built_in">count</span> = <span class="number">0</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</div><div class="line"><span class="comment">// 初始计数值是0</span></div><div class="line">counter.increment()</div><div class="line"><span class="comment">// 计数值现在是1</span></div><div class="line">counter.incrementBy(<span class="number">5</span>)</div><div class="line"><span class="comment">// 计数值现在是6</span></div><div class="line">counter.reset()</div><div class="line"><span class="comment">// 计数值现在是0</span></div></pre></td></tr></table></figure></p>
<h3 id="外部参数名"><a href="#外部参数名" class="headerlink" title="外部参数名"></a>外部参数名</h3><p>方法默认第一个参数没有外部参数名，第二个及以后参数默认有外部参数名，和参数名一致，相当于默认在参数前加上了<code>#</code>。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">  <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(amount: Int, numberOfTimes: Int)</span></span> &#123;</div><div class="line">    <span class="built_in">count</span> += amount * numberOfTimes</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</div><div class="line">counter.incrementBy(<span class="number">5</span>, numberOfTimes: <span class="number">3</span>)</div><div class="line"><span class="comment">// counter value is now 15</span></div></pre></td></tr></table></figure></p>
<p>也可以在第一个参数名添加外部参数名，也可以用_放在第二个及以后的参数名前取消默认的外部参数名。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</div><div class="line">    <span class="keyword">var</span> <span class="built_in">count</span>: <span class="type">Int</span> = <span class="number">0</span></div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">incrementBy</span><span class="params">(#amount: Int, <span class="number">_</span> numberOfTimes: Int)</span></span> &#123;</div><div class="line">        <span class="built_in">count</span> += amount * numberOfTimes</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> counter = <span class="type">Counter</span>()</div><div class="line">counter.incrementBy(amount: <span class="number">5</span>, <span class="number">3</span>)</div><div class="line"><span class="built_in">println</span>(counter.<span class="built_in">count</span>)</div><div class="line"><span class="comment">// counter value is now 15</span></div></pre></td></tr></table></figure></p>
<p>关于外部参数名，参见<a href="http://aidaizyy.github.io/swift_5/#外部参数名" target="_blank" rel="external">函数的外部参数名</a>。</p>
<h3 id="self属性"><a href="#self属性" class="headerlink" title="self属性"></a>self属性</h3><p>在每个实例中，都有一个隐藏属性<code>self</code>，指代实例变身，以便方法调用实例本身。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">increment</span><span class="params">()</span></span> &#123;</div><div class="line">  <span class="keyword">self</span>.<span class="built_in">count</span>++</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="变异方法"><a href="#变异方法" class="headerlink" title="变异方法"></a>变异方法</h3><p>结构体和枚举是值类型。值类型的属性不可以在实例方法中被修改。<br>变异方法可以完成对属性的修改，在<code>func</code>前加上<code>mutating</code>关键字。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">  <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveByX</span><span class="params">(deltaX: Double, y deltaY: Double)</span></span> &#123;</div><div class="line">    x += deltaX</div><div class="line">    y += deltaY</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> somePoint = <span class="type">Point</span>(x: <span class="number">1.0</span>, y: <span class="number">1.0</span>)</div><div class="line">somePoint.moveByX(<span class="number">2.0</span>, y: <span class="number">3.0</span>)</div><div class="line"><span class="built_in">println</span>(<span class="string">"The point is now at (\(somePoint.x), \(somePoint.y))"</span>)</div><div class="line"><span class="comment">// 输出 "The point is now at (3.0, 4.0)"</span></div></pre></td></tr></table></figure></p>
<p>变异方法也可以给<code>self</code>赋值，即新建一个实例替代旧的实例。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span> </span>&#123;</div><div class="line">  <span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span></div><div class="line">  <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">moveByX</span><span class="params">(deltaX: Double, y deltaY: Double)</span></span> &#123;</div><div class="line">    <span class="keyword">self</span> = <span class="type">Point</span>(x: x + deltaX, y: y + deltaY)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">TriStateSwitch</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> <span class="type">Off</span>, <span class="type">Low</span>, <span class="type">High</span></div><div class="line">  <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">next</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</div><div class="line">    <span class="keyword">case</span> <span class="type">Off</span>:</div><div class="line">      <span class="keyword">self</span> = <span class="type">Low</span></div><div class="line">    <span class="keyword">case</span> <span class="type">Low</span>:</div><div class="line">      <span class="keyword">self</span> = <span class="type">High</span></div><div class="line">    <span class="keyword">case</span> <span class="type">High</span>:</div><div class="line">      <span class="keyword">self</span> = <span class="type">Off</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> ovenLight = <span class="type">TriStateSwitch</span>.<span class="type">Low</span></div><div class="line">ovenLight.next()</div><div class="line"><span class="comment">// ovenLight 现在等于 .High</span></div><div class="line">ovenLight.next()</div><div class="line"><span class="comment">// ovenLight 现在等于 .Off</span></div></pre></td></tr></table></figure>
<p>类是引用类型，实例方法可以直接修改属性。</p>
<h2 id="类型方法"><a href="#类型方法" class="headerlink" title="类型方法"></a>类型方法</h2><p>类型方法和类型属性类似，都是指所有类型实例公共的方法，类似于其他语言中的静态方法（<em>static</em>）。<br>类型方法在类型前加上<code>class</code>关键字。<br>类型方法能够直接通过静态属性的名称访问静态属性。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SomeClass</span> </span>&#123;</div><div class="line">  <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">someTypeMethod</span>() </span>&#123;</div><div class="line">    <span class="comment">// type method implementation goes here</span></div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="type">SomeClass</span>.someTypeMethod()</div></pre></td></tr></table></figure></p>
<h1 id="下标"><a href="#下标" class="headerlink" title="下标"></a>下标</h1><p>下标（<em>subscripts</em>）可以定义在类，结构体和枚举中，是访问对象，集合和序列的快捷方式。比如<a href="http://aidaizyy.github.io/swift_3/#访问" target="_blank" rel="external">数组的访问</a>：Array[index]，<a href="http://aidaizyy.github.io/swift_3/#访问-1" target="_blank" rel="external">字典的访问</a>：Dictionary[key]。<br>下标的定义类似于实例方法和计算性属性的混合。<br>使用<code>subscript</code>关键字，定义了传入参数数量和类型和返回类型，定义了getter和setter。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">    <span class="keyword">get</span> &#123;</div><div class="line">      <span class="comment">// 返回与入参匹配的Int类型的值</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">set</span>(newValue) &#123;</div><div class="line">      <span class="comment">// 执行赋值操作</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>getter和setter的定义和计算型属性一样。<br>setter中可以使用<code>newValue</code>默认值，可以省略setter定义成只读类型。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TimesTable</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> multiplier: <span class="type">Int</span></div><div class="line">    <span class="keyword">subscript</span>(index: <span class="type">Int</span>) -&gt; <span class="type">Int</span> &#123;</div><div class="line">      <span class="keyword">return</span> multiplier * index</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> threeTimesTable = <span class="type">TimesTable</span>(multiplier: <span class="number">3</span>)</div><div class="line"><span class="built_in">println</span>(<span class="string">"3的6倍是\(threeTimesTable[6])"</span>)</div><div class="line"><span class="comment">// 输出 "3的6倍是18"</span></div></pre></td></tr></table></figure></p>
<p>下标允许任意数量的传入参数，任意类型的传入参数和任意类型的返回值。<br>可以使用<a href="http://aidaizyy.github.io/swift_5/#变量参数" target="_blank" rel="external">变量参数</a>和<a href="http://aidaizyy.github.io/swift_5/#可变参数" target="_blank" rel="external">可变参数</a>，但是不能使用<a href="http://aidaizyy.github.io/swift_5/#输入输出参数" target="_blank" rel="external">输入输出参数（inout）</a>和<a href="http://aidaizyy.github.io/swift_5/#默认参数值" target="_blank" rel="external">默认参数值</a>。<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Matrix</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> rows: <span class="type">Int</span>, columns: <span class="type">Int</span></div><div class="line">    <span class="keyword">var</span> grid: [<span class="type">Double</span>]</div><div class="line">    <span class="keyword">init</span>(rows: <span class="type">Int</span>, columns: <span class="type">Int</span>) &#123;</div><div class="line">      <span class="keyword">self</span>.rows = rows</div><div class="line">      <span class="keyword">self</span>.columns = columns</div><div class="line">      grid = <span class="type">Array</span>(<span class="built_in">count</span>: rows * columns, repeatedValue: <span class="number">0.0</span>)</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">indexIsValidForRow</span><span class="params">(row: Int, column: Int)</span></span> -&gt; <span class="type">Bool</span> &#123;</div><div class="line">        <span class="keyword">return</span> row &gt;= <span class="number">0</span> &amp;&amp; row &lt; rows &amp;&amp; column &gt;= <span class="number">0</span> &amp;&amp; column &lt; columns</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">subscript</span>(row: <span class="type">Int</span>, column: <span class="type">Int</span>) -&gt; <span class="type">Double</span> &#123;</div><div class="line">        <span class="keyword">get</span> &#123;</div><div class="line">            <span class="built_in">assert</span>(indexIsValidForRow(row, column: column), <span class="string">"Index out of range"</span>)</div><div class="line">            <span class="keyword">return</span> grid[(row * columns) + column]</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">set</span> &#123;</div><div class="line">            <span class="built_in">assert</span>(indexIsValidForRow(row, column: column), <span class="string">"Index out of range"</span>)</div><div class="line">            grid[(row * columns) + column] = newValue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> matrix = <span class="type">Matrix</span>(rows: <span class="number">2</span>, columns: <span class="number">2</span>)</div><div class="line"><span class="built_in">println</span>(matrix[<span class="number">0</span>, <span class="number">1</span>])</div><div class="line"><span class="comment">//0.0</span></div><div class="line">matrix[<span class="number">0</span>, <span class="number">1</span>] = <span class="number">1.5</span></div><div class="line"><span class="built_in">println</span>(matrix[<span class="number">0</span>, <span class="number">1</span>])</div><div class="line"><span class="comment">//1.5</span></div></pre></td></tr></table></figure></p>
<p><strong> 转载请注明原作者和出处。</strong></p>
<blockquote>
<p>如果觉得这篇文章对您有帮助或启发，请随意打赏~</p>
<p> <img src="http://7xivk7.com1.z0.glb.clouddn.com/paycode01.jpg" width="250" align="left"> <img src="http://7xivk7.com1.z0.glb.clouddn.com/paycode02.jpg" width="250" align="left"> </p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://aidaiz.com/swift_7/" data-id="cj8lqlriw001lewo3zt5c9h1u" class="article-share-link">Share</a>
      
        <a href="http://aidaiz.com/swift_7/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/swift_8/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Swift基础入门(8)：继承，构造，析构和嵌套类型
        
      </div>
    </a>
  
  
    <a href="/swift_6/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Swift基础入门(6)：枚举，类和结构体</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/computer-architecture/">computer architecture</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/dpdk/">dpdk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hadoop/">hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/openvswitch/">openvswitch</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/spdk/">spdk</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/swift/">swift</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cache/">cache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/computer-architecture/">computer architecture</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dpdk/">dpdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hadoop/">hadoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openflow/">openflow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openvswitch/">openvswitch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/proguard/">proguard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spdk/">spdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/computer-architecture/" style="font-size: 10px;">computer architecture</a> <a href="/tags/dpdk/" style="font-size: 15px;">dpdk</a> <a href="/tags/hadoop/" style="font-size: 10px;">hadoop</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/openflow/" style="font-size: 15px;">openflow</a> <a href="/tags/openvswitch/" style="font-size: 15px;">openvswitch</a> <a href="/tags/proguard/" style="font-size: 10px;">proguard</a> <a href="/tags/spdk/" style="font-size: 10px;">spdk</a> <a href="/tags/swift/" style="font-size: 20px;">swift</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">July 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/openvswitch-qos/">Open vSwitch的OpenFlow和QOS</a>
          </li>
        
          <li>
            <a href="/openvswitch-build/">Open vSwitch安装与使用</a>
          </li>
        
          <li>
            <a href="/ssh/">SSH秘钥与SSHFS挂载</a>
          </li>
        
          <li>
            <a href="/spdk/">SPDK简介</a>
          </li>
        
          <li>
            <a href="/hadoop/">Hadoop安装运行</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Yunyao Zhang（张云尧）<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'aidaiz';
  
  var disqus_url = 'http://aidaiz.com/swift_7/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>